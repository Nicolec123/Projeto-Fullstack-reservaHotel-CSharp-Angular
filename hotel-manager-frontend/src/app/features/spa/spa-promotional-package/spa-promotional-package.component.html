<div class="spa-promotional-page">
  <div class="booking-container">
    <a routerLink="/" class="back-link">‚Üê Voltar</a>

    <div class="steps-indicator">
      <div class="step-item" [class.active]="step() >= 1" [class.done]="step() > 1">
        <span class="step-num">1</span>
        <span class="step-label">Detalhes</span>
      </div>
      <div class="step-line" [class.done]="step() > 1"></div>
      <div class="step-item" [class.active]="step() >= 2" [class.done]="step() > 2">
        <span class="step-num">2</span>
        <span class="step-label">Customizar</span>
      </div>
      <div class="step-line" [class.done]="step() > 2"></div>
      <div class="step-item" [class.active]="step() >= 3" [class.done]="step() > 3">
        <span class="step-num">3</span>
        <span class="step-label">Dados</span>
      </div>
      <div class="step-line" [class.done]="step() > 3"></div>
      <div class="step-item" [class.active]="step() >= 4" [class.done]="step() >= 5">
        <span class="step-num">4</span>
        <span class="step-label">Pagamento</span>
      </div>
    </div>

    @if (step() === 1) {
      <!-- Passo 1: Detalhes do Pacote -->
      <section class="step-content">
        @if (packageData(); as pkg) {
          <div class="package-detail-card">
            <div class="package-image-large">
              <img [src]="pkg.imagem" [alt]="pkg.titulo" />
            </div>
            <div class="package-info">
              <div class="package-badge">{{ pkg.duracao }}</div>
              <h1>{{ pkg.titulo }}</h1>
              <p class="package-description">{{ pkg.descricao }}</p>
              
              <div class="package-highlights">
                <div class="highlight-item">
                  <span class="highlight-icon">üåô</span>
                  <span>{{ pkg.noites }} noite{{ pkg.noites > 1 ? 's' : '' }}</span>
                </div>
                <div class="highlight-item">
                  <span class="highlight-icon">üë•</span>
                  <span>{{ pkg.pessoasIncluidas || 1 }} pessoa{{ (pkg.pessoasIncluidas || 1) > 1 ? 's' : '' }}</span>
                </div>
                <div class="highlight-item">
                  <span class="highlight-icon">üè®</span>
                  <span>Quarto {{ pkg.tipoQuarto === 'suite' ? 'Su√≠te' : 'Padr√£o' }}</span>
                </div>
              </div>

              <div class="package-includes">
                <h3>O que est√° inclu√≠do:</h3>
                <ul>
                  @for (item of pkg.itens; track item) {
                    <li>{{ item }}</li>
                  }
                </ul>
              </div>

              <div class="package-price-large">
                <span class="price-label">A partir de</span>
                <span class="price-value">{{ formatarPreco(pkg.precoBase) }}</span>
              </div>

              <div class="package-actions">
                <a [routerLink]="['/spa/pacote', pkg.id, 'detalhes']" class="btn-secondary-details">
                  Ver Detalhes
                </a>
                <button type="button" class="btn-primary" (click)="avancarParaCustomizacao()">
                  Continuar para Agendamento ‚Üí
                </button>
              </div>
            </div>
          </div>
        }
      </section>
    }

    @if (step() === 2) {
      <!-- Passo 2: Customiza√ß√£o (Datas e H√≥spedes) -->
      <section class="step-content">
        @if (packageData(); as pkg) {
          <div class="selected-package-summary">
            <div class="summary-info">
              <h2>{{ pkg.titulo }}</h2>
              <div class="summary-details">
                <span>{{ pkg.duracao }}</span>
                <span>‚Ä¢</span>
                <span>{{ numHospedesTotal() }} pessoa{{ numHospedesTotal() > 1 ? 's' : '' }}</span>
              </div>
            </div>
            <div class="summary-price">
              <span class="price-label">Total</span>
              <span class="price-value">{{ formatarPreco(precoTotal()) }}</span>
              <span class="price-breakdown">
                Base: {{ formatarPreco(pkg.precoBase) }}
                @if (numHospedesTotal() > (pkg.pessoasIncluidas || 1)) {
                  <br>+ {{ numHospedesTotal() - (pkg.pessoasIncluidas || 1) }} pessoa{{ numHospedesTotal() - (pkg.pessoasIncluidas || 1) > 1 ? 's' : '' }} extra: 
                  {{ formatarPreco((numHospedesTotal() - (pkg.pessoasIncluidas || 1)) * (pkg.precoPorPessoaExtra || 0)) }}
                }
                @if (form.value.numCaes && pkg.noites) {
                  <br>+ Taxa c√£es: {{ formatarPreco((form.value.numCaes || 0) * taxaPorCaoPorNoite * pkg.noites) }}
                }
              </span>
            </div>
          </div>
        }

        <div class="form-card custom-form-card">
          <div class="form-header">
            <h2>Customize sua Reserva</h2>
            <p class="form-subtitle">Escolha as datas e configure sua hospedagem</p>
          </div>
          
          @if (error()) {
            <div class="error">{{ error() }}</div>
          }

          <form [formGroup]="form">
            <div class="form-section">
              <div class="section-header">
                <span class="section-icon">üìÖ</span>
                <h3>Datas da Hospedagem</h3>
              </div>
              <div class="form-row dates-row">
                <label class="date-input-wrapper">
                  <span class="label-text">Data de Check-in *</span>
                  <div class="input-wrapper">
                    <input 
                      type="date" 
                      formControlName="dataCheckIn"
                      [min]="getMinDate()"
                      [max]="getMaxDate()"
                      (change)="onCheckInChange()"
                      class="date-input"
                    />
                  </div>
                </label>
                <label class="date-input-wrapper">
                  <span class="label-text">Data de Check-out *</span>
                  <div class="input-wrapper">
                    <input 
                      type="date" 
                      formControlName="dataCheckOut"
                      [min]="getMinDate()"
                      [max]="getMaxDate()"
                      [readonly]="true"
                      class="date-input"
                      style="background: var(--color-bg); cursor: not-allowed; opacity: 0.8;"
                    />
                  </div>
                  <small style="color: var(--color-text-muted); font-style: italic;">
                    Calculado automaticamente baseado no n√∫mero de noites do pacote
                  </small>
                </label>
              </div>
              @if (packageData(); as pkg) {
                <div class="info-box">
                  <span class="info-icon">‚ÑπÔ∏è</span>
                  <span>Este pacote inclui {{ pkg.noites }} noite{{ pkg.noites > 1 ? 's' : '' }} de hospedagem.</span>
                </div>
              }
            </div>

            <div class="form-section">
              <div class="section-header">
                <span class="section-icon">üë•</span>
                <h3>N√∫mero de H√≥spedes</h3>
              </div>
              <div class="form-row children-pets-row">
                <label class="number-input-wrapper">
                  <div class="field-header">
                    <span class="field-icon">üë•</span>
                    <span class="label-text">Quantidade de Pessoas *</span>
                  </div>
                  <div class="input-with-buttons">
                    <button 
                      type="button" 
                      class="btn-number" 
                      (click)="decrementarHospedes()"
                      [disabled]="(form.value.numHospedes || 1) <= (packageData()?.pessoasIncluidas || 1)"
                    >-</button>
                    <input 
                      type="number" 
                      formControlName="numHospedes"
                      [min]="packageData()?.pessoasIncluidas || 1"
                      [max]="packageData()?.pessoasMaximas || 4"
                      (change)="onNumHospedesChange()"
                      class="number-input"
                    />
                    <button 
                      type="button" 
                      class="btn-number"
                      (click)="incrementarHospedes()"
                      [disabled]="(form.value.numHospedes || 1) >= (packageData()?.pessoasMaximas || 4)"
                    >+</button>
                  </div>
                  @if (packageData(); as pkg) {
                    <small>
                      M√≠nimo: {{ pkg.pessoasIncluidas || 1 }} pessoa{{ (pkg.pessoasIncluidas || 1) > 1 ? 's' : '' }}
                      @if (pkg.pessoasMaximas) {
                        | M√°ximo: {{ pkg.pessoasMaximas }} pessoa{{ pkg.pessoasMaximas > 1 ? 's' : '' }}
                      }
                      @if (pkg.precoPorPessoaExtra) {
                        <br>
                        <strong>+ {{ formatarPreco(pkg.precoPorPessoaExtra) }} por pessoa extra</strong>
                      }
                    </small>
                  }
                </label>

                <label class="number-input-wrapper">
                  <div class="field-header">
                    <span class="field-icon">üë∂</span>
                    <span class="label-text">Quantidade de Crian√ßas</span>
                  </div>
                  <div class="input-with-buttons">
                    <button 
                      type="button" 
                      class="btn-number" 
                      (click)="decrementarCriancas()"
                      [disabled]="(form.value.numCriancas || 0) <= 0"
                    >-</button>
                    <input 
                      type="number" 
                      formControlName="numCriancas"
                      [min]="0"
                      [max]="4"
                      class="number-input"
                    />
                    <button 
                      type="button" 
                      class="btn-number"
                      (click)="incrementarCriancas()"
                      [disabled]="(form.value.numCriancas || 0) >= 4"
                    >+</button>
                  </div>
                  <small>M√°ximo: 4 crian√ßas</small>
                </label>

                <label class="number-input-wrapper">
                  <div class="field-header">
                    <span class="field-icon">üêï</span>
                    <span class="label-text">Quantidade de C√£es</span>
                  </div>
                  <div class="input-with-buttons">
                    <button 
                      type="button" 
                      class="btn-number" 
                      (click)="decrementarCaes()"
                      [disabled]="(form.value.numCaes || 0) <= 0"
                    >-</button>
                    <input 
                      type="number" 
                      formControlName="numCaes"
                      [min]="0"
                      [max]="2"
                      class="number-input"
                    />
                    <button 
                      type="button" 
                      class="btn-number"
                      (click)="incrementarCaes()"
                      [disabled]="(form.value.numCaes || 0) >= 2"
                    >+</button>
                  </div>
                  @if (packageData(); as pkg) {
                    <small>
                      M√°ximo: 2 c√£es
                      @if (form.value.numCaes && pkg.noites) {
                        <br>
                        <strong>Taxa: {{ formatarPreco(taxaPorCaoPorNoite) }} por c√£o por noite</strong>
                        <br>
                        Total taxa: {{ formatarPreco((form.value.numCaes || 0) * taxaPorCaoPorNoite * pkg.noites) }}
                      } @else {
                        <br>
                        <strong>Taxa: {{ formatarPreco(taxaPorCaoPorNoite) }} por c√£o por noite</strong>
                      }
                    </small>
                  }
                </label>
              </div>
            </div>

            <div class="form-section">
              <div class="section-header">
                <span class="section-icon">üõèÔ∏è</span>
                <h3>Tipo de Acomoda√ß√£o</h3>
              </div>
              <div class="form-row">
                <div class="radio-group-accommodation">
                  <label class="radio-option-accommodation" [class.selected]="form.value.tipoAcomodacao === 'solteiro'">
                    <input 
                      type="radio" 
                      formControlName="tipoAcomodacao" 
                      value="solteiro"
                    />
                    <div class="radio-content">
                      <span class="radio-icon">üõèÔ∏è</span>
                      <div>
                        <span class="radio-title">Solteiro</span>
                        <span class="radio-desc">1 cama de solteiro</span>
                      </div>
                    </div>
                  </label>
                  <label class="radio-option-accommodation" [class.selected]="form.value.tipoAcomodacao === 'casal'">
                    <input 
                      type="radio" 
                      formControlName="tipoAcomodacao" 
                      value="casal"
                    />
                    <div class="radio-content">
                      <span class="radio-icon">üõèÔ∏è</span>
                      <div>
                        <span class="radio-title">Casal</span>
                        <span class="radio-desc">1 cama de casal</span>
                      </div>
                    </div>
                  </label>
                  <label class="radio-option-accommodation" [class.selected]="form.value.tipoAcomodacao === 'duas-camas'">
                    <input 
                      type="radio" 
                      formControlName="tipoAcomodacao" 
                      value="duas-camas"
                    />
                    <div class="radio-content">
                      <span class="radio-icon">üõèÔ∏è</span>
                      <div>
                        <span class="radio-title">Duas ou Mais Camas</span>
                        <span class="radio-desc">2 ou mais camas separadas</span>
                      </div>
                    </div>
                  </label>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-secondary" (click)="voltarParaDetalhes()">‚Üê Voltar</button>
              <button type="button" class="btn-primary" (click)="avancarParaDados()">Continuar ‚Üí</button>
            </div>
          </form>
        </div>
      </section>
    }

    @if (step() === 3) {
      <!-- Passo 3: Dados do Cliente -->
      <section class="step-content">
        @if (packageData(); as pkg) {
          <div class="selected-package-summary">
            <div class="summary-info">
              <h2>{{ pkg.titulo }}</h2>
              <div class="summary-details">
                <span>{{ formatarData(form.value.dataCheckIn || '') }} - {{ formatarData(form.value.dataCheckOut || '') }}</span>
                <span>‚Ä¢</span>
                <span>{{ numHospedesTotal() }} pessoa{{ numHospedesTotal() > 1 ? 's' : '' }}</span>
              </div>
            </div>
            <div class="summary-price">
              <span class="price-label">Total</span>
              <span class="price-value">{{ formatarPreco(precoTotal()) }}</span>
            </div>
          </div>
        }

        <div class="form-card custom-form-card">
          <div class="form-header">
            <h2>Dados dos H√≥spedes</h2>
            <p class="form-subtitle">Preencha as informa√ß√µes de todas as pessoas que se hospedar√£o</p>
          </div>
          
          @if (error()) {
            <div class="error">{{ error() }}</div>
          }

          <form [formGroup]="form">
            <!-- Dados da primeira pessoa (quem est√° fazendo a reserva) -->
            <div class="form-section">
              <div class="section-header">
                <span class="section-icon">üë§</span>
                <h3>Dados de Quem Est√° Fazendo a Reserva</h3>
              </div>
              <div class="form-row">
                <label class="input-label">
                  <span class="label-text">Nome Completo *</span>
                  <input type="text" formControlName="nome" placeholder="Nome completo" class="form-input" />
                </label>
                <label class="input-label">
                  <span class="label-text">E-mail *</span>
                  <input type="email" formControlName="email" placeholder="seu@email.com" class="form-input" />
                </label>
                <label class="input-label">
                  <span class="label-text">Telefone *</span>
                  <input type="tel" formControlName="telefone" placeholder="(11) 99999-9999" class="form-input" />
                </label>
              </div>
            </div>

            <!-- Dados dos h√≥spedes extras -->
            @if (hospedesExtrasArray.length > 0) {
              <div class="form-section">
                <div class="section-header">
                  <span class="section-icon">üë•</span>
                  <h3>Dados dos Outros H√≥spedes</h3>
                </div>
                @for (hospedeGroup of hospedesExtrasArray.controls; track $index) {
                  <div class="hospede-extra-card">
                    <div class="hospede-header">
                      <h4>H√≥spede {{ $index + (packageData()?.pessoasIncluidas || 1) + 1 }}</h4>
                    </div>
                    <div [formGroup]="getHospedeGroup($index)" class="hospede-form-fields">
                      <div class="form-row">
                        <label class="input-label">
                          <span class="label-text">Nome Completo *</span>
                          <input type="text" formControlName="nome" placeholder="Nome completo" class="form-input" />
                        </label>
                        <label class="input-label">
                          <span class="label-text">E-mail *</span>
                          <input type="email" formControlName="email" placeholder="email@exemplo.com" class="form-input" />
                        </label>
                        <label class="input-label">
                          <span class="label-text">Telefone *</span>
                          <input type="tel" formControlName="telefone" placeholder="(11) 99999-9999" class="form-input" />
                        </label>
                      </div>
                    </div>
                  </div>
                }
              </div>
            }

            <div class="form-section">
              <div class="section-header">
                <span class="section-icon">üìù</span>
                <h3>Observa√ß√µes</h3>
              </div>
              <div class="form-row">
                <label class="input-label full-width">
                  <span class="label-text">Observa√ß√µes (opcional)</span>
                  <textarea formControlName="observacoes" rows="4" placeholder="Alguma observa√ß√£o especial? Ex: necessidades especiais, prefer√™ncias de quarto, etc." class="form-textarea"></textarea>
                </label>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-secondary" (click)="voltarParaCustomizacao()">‚Üê Voltar</button>
              <button type="button" class="btn-primary" (click)="avancarParaRevisao()">Continuar ‚Üí</button>
            </div>
          </form>
        </div>
      </section>
    }

    @if (step() === 4) {
      <!-- Passo 4: Revis√£o e Pagamento -->
      <section class="step-content">
        <div class="review-container" [formGroup]="form">
          <h2>Passo 4 ‚Äî Revisar e pagamento</h2>
          <p class="review-subtitle">Confira todos os dados antes de confirmar sua reserva</p>
          
          @if (error()) {
            <div class="error-large">{{ error() }}</div>
          }

          @if (packageData(); as pkg) {
            <div class="review-main-grid">
              <!-- Pacote e Servi√ßos -->
              <div class="review-section">
                <h3 class="review-section-title">üéÅ Pacote Promocional</h3>
                <div class="review-section-content">
                  <div class="review-item-large">
                    <div class="review-item-header">
                      <strong>{{ pkg.titulo }}</strong>
                      <span class="badge-type">{{ pkg.duracao }}</span>
                    </div>
                    <div class="price-breakdown">
                      <div class="price-line">
                        <span>{{ formatarPreco(pkg.precoBase) }}</span>
                        <span>Pacote base</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Datas e Estadia -->
              <div class="review-section">
                <h3 class="review-section-title">üìÖ Datas e Estadia</h3>
                <div class="review-section-content">
                  <div class="review-item">
                    <span class="review-label">Check-in</span>
                    <span class="review-value">{{ form.value.dataCheckIn ? formatarData(form.value.dataCheckIn) : 'N√£o informado' }}</span>
                  </div>
                  <div class="review-item">
                    <span class="review-label">Check-out</span>
                    <span class="review-value">{{ form.value.dataCheckOut ? formatarData(form.value.dataCheckOut) : 'N√£o informado' }}</span>
                  </div>
                  <div class="review-item highlight">
                    <span class="review-label">Per√≠odo</span>
                    <span class="review-value">{{ pkg.noites }} {{ pkg.noites === 1 ? 'noite' : 'noites' }}</span>
                  </div>
                </div>
              </div>

              <!-- Ocupa√ß√£o -->
              <div class="review-section">
                <h3 class="review-section-title">üë• Ocupa√ß√£o</h3>
                <div class="review-section-content">
                  <div class="review-item">
                    <span class="review-label">üë§ Pessoas</span>
                    <span class="review-value">{{ form.value.numHospedes || 1 }}</span>
                  </div>
                  @if ((form.value.numCriancas || 0) > 0) {
                    <div class="review-item">
                      <span class="review-label">üë∂ Crian√ßas</span>
                      <span class="review-value">{{ form.value.numCriancas }}</span>
                    </div>
                  }
                  @if ((form.value.numCaes || 0) > 0) {
                    <div class="review-item">
                      <span class="review-label">üêï C√£es</span>
                      <span class="review-value">{{ form.value.numCaes }}</span>
                      <small class="review-note">Taxa: {{ formatarPreco(taxaPorCaoPorNoite) }} por c√£o por noite</small>
                    </div>
                  }
                  <div class="review-item highlight">
                    <span class="review-label">Total de h√≥spedes</span>
                    <span class="review-value-large">{{ numHospedesTotal() }} pessoa{{ numHospedesTotal() > 1 ? 's' : '' }}</span>
                  </div>
                  <div class="review-item">
                    <span class="review-label">Tipo de Acomoda√ß√£o</span>
                    <span class="review-value">
                      @switch (form.value.tipoAcomodacao) {
                        @case ('solteiro') { Solteiro }
                        @case ('casal') { Casal (1 cama de casal) }
                        @case ('duas-camas') { Duas ou Mais Camas }
                        @default { N√£o informado }
                      }
                    </span>
                  </div>
                </div>
              </div>

              <!-- H√≥spede principal -->
              <div class="review-section">
                <h3 class="review-section-title">üë§ Dados do h√≥spede principal</h3>
                <div class="review-section-content">
                  <div class="review-item">
                    <span class="review-label">Nome</span>
                    <span class="review-value">{{ form.value.nome || 'N√£o informado' }}</span>
                  </div>
                  <div class="review-item">
                    <span class="review-label">E-mail</span>
                    <span class="review-value">{{ form.value.email || 'N√£o informado' }}</span>
                  </div>
                  @if (form.value.telefone) {
                    <div class="review-item">
                      <span class="review-label">Telefone</span>
                      <span class="review-value">{{ form.value.telefone }}</span>
                    </div>
                  }
                </div>
              </div>

              <!-- H√≥spedes adicionais -->
              @if (hospedesExtrasArray.controls.length > 0) {
                <div class="review-section">
                  <h3 class="review-section-title">üë• H√≥spedes adicionais cadastrados</h3>
                  <div class="review-section-content">
                    @for (g of hospedesExtrasArray.controls; track $index) {
                      <div class="review-item guest-review-item">
                        <span class="review-label">{{ $any(g).get('nome')?.value || 'H√≥spede ' + ($index + (pkg.pessoasIncluidas || 1) + 1) }}</span>
                        <span class="review-value">
                          E-mail: {{ $any(g).get('email')?.value || 'N√£o informado' }}
                        </span>
                        @if ($any(g).get('telefone')?.value) {
                          <span class="review-note">Telefone: {{ $any(g).get('telefone')?.value }}</span>
                        }
                      </div>
                    }
                  </div>
                </div>
              }

              @if (form.value.observacoes) {
                <div class="review-section">
                  <h3 class="review-section-title">üìù Observa√ß√µes</h3>
                  <div class="review-section-content">
                    <div class="review-item full-width">
                      <span class="review-value">{{ form.value.observacoes }}</span>
                    </div>
                  </div>
                </div>
              }
            </div>

            <!-- Resumo Financeiro -->
            <div class="financial-summary">
              <h3>üí∞ Resumo Financeiro</h3>
              <div class="financial-breakdown">
                <div class="financial-line">
                  <span>Pacote Base</span>
                  <span>{{ formatarPreco(pkg.precoBase) }}</span>
                </div>
                @if (numHospedesTotal() > (pkg.pessoasIncluidas || 1)) {
                  <div class="financial-line">
                    <span>Pessoas Extras ({{ numHospedesTotal() - (pkg.pessoasIncluidas || 1) }})</span>
                    <span>{{ formatarPreco((numHospedesTotal() - (pkg.pessoasIncluidas || 1)) * (pkg.precoPorPessoaExtra || 0)) }}</span>
                  </div>
                }
                @if ((form.value.numCaes || 0) > 0 && pkg.noites) {
                  <div class="financial-line">
                    <span>Taxa c√£es ({{ form.value.numCaes }} √ó {{ pkg.noites }} noite{{ pkg.noites > 1 ? 's' : '' }})</span>
                    <span>{{ formatarPreco((form.value.numCaes || 0) * taxaPorCaoPorNoite * pkg.noites) }}</span>
                  </div>
                }
                <div class="financial-line total-line">
                  <span><strong>Total a pagar</strong></span>
                  <span class="total-amount">{{ formatarPreco(precoTotal()) }}</span>
                </div>
              </div>
            </div>

            <!-- Pagamento -->
            <div class="payment-section">
              <h3>üí≥ Forma de pagamento</h3>
              <div class="payment-methods">
                <label class="payment-method">
                  <input type="radio" formControlName="metodoPagamento" value="cartaocredito" />
                  <div class="payment-card">
                    <span class="payment-icon">üí≥</span>
                    <div>
                      <strong>Cart√£o de cr√©dito</strong>
                      <small>Pagamento imediato</small>
                    </div>
                  </div>
                </label>
                <label class="payment-method">
                  <input type="radio" formControlName="metodoPagamento" value="pix" />
                  <div class="payment-card">
                    <span class="payment-icon">üì±</span>
                    <div>
                      <strong>PIX</strong>
                      <small>Pagamento instant√¢neo</small>
                    </div>
                  </div>
                </label>
                <label class="payment-method">
                  <input type="radio" formControlName="metodoPagamento" value="boleto" />
                  <div class="payment-card">
                    <span class="payment-icon">üßæ</span>
                    <div>
                      <strong>Boleto</strong>
                      <small>Compensa√ß√£o em at√© 3 dias</small>
                    </div>
                  </div>
                </label>
              </div>

              @if (form.value.metodoPagamento === 'cartaocredito') {
                <div class="card-form">
                  <label>
                    <span>N√∫mero do cart√£o</span>
                    <input type="text" formControlName="tokenPagamento" placeholder="0000 0000 0000 0000" maxlength="19" />
                  </label>
                  <div class="form-row">
                    <label>
                      <span>Validade</span>
                      <input type="text" placeholder="MM/AA" maxlength="5" />
                    </label>
                    <label>
                      <span>CVV</span>
                      <input type="text" placeholder="123" maxlength="3" />
                    </label>
                  </div>
                  <label>
                    <span>Nome no cart√£o</span>
                    <input type="text" placeholder="Nome como est√° no cart√£o" />
                  </label>
                  <p class="payment-info">üí° Este √© um ambiente de demonstra√ß√£o. Nenhum dado real ser√° processado.</p>
                </div>
              }

              @if (form.value.metodoPagamento === 'pix' || form.value.metodoPagamento === 'boleto') {
                <div class="payment-info-box">
                  <p>üìã O c√≥digo de pagamento ser√° gerado ap√≥s a confirma√ß√£o da reserva e enviado por email.</p>
                </div>
              }
            </div>

            <div class="actions-large">
              <button type="button" class="btn-secondary-large" (click)="voltarParaDados()">‚Üê Alterar dados</button>
              <button type="button" class="btn-primary-large" (click)="confirmarReserva()" [disabled]="submitting() || !form.value.metodoPagamento">
                {{ submitting() ? 'Processando...' : '‚úì Confirmar e finalizar reserva' }}
              </button>
            </div>
          }
        </div>
      </section>
    }

    @if (step() === 5) {
      <!-- Passo 5: Sucesso -->
      <section class="step-content success-content">
        <div class="success-icon">‚úì</div>
        <h2>Reserva Confirmada!</h2>
        <p class="success-message">
          Sua reserva foi realizada com sucesso. Voc√™ receber√° um e-mail de confirma√ß√£o em breve.
        </p>
        <div class="success-actions">
          <button type="button" class="btn-primary" (click)="router.navigate(['/'])">Voltar ao In√≠cio</button>
          <button type="button" class="btn-secondary" (click)="router.navigate(['/minhas-reservas'])">Ver Minhas Reservas</button>
        </div>
      </section>
    }
  </div>
</div>
